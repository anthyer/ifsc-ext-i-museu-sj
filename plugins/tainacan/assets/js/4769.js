"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[4769],{1580:(t,e,i)=>{i.d(e,{A:()=>o});var n=i(65475),a=i(84363);i(3071);const o=(0,i(66262).A)(a.A,[["render",n.X]])},2885:(t,e,i)=>{i.d(e,{A:()=>n});const n={name:"FilePreview",props:{file:Object},emits:["close"]}},3071:(t,e,i)=>{i(24290)},24290:(t,e,i)=>{var n=i(85072),a=i.n(n),o=i(97825),r=i.n(o),l=i(77659),s=i.n(l),m=i(55056),c=i.n(m),u=i(10540),f=i.n(u),h=i(63494),d=i.n(h),p=i(50643),g={};g.styleTagTransform=d(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=f();a()(p.A,g),p.A&&p.A.locals&&p.A.locals},24524:(t,e,i)=>{i.d(e,{X:()=>n.X});var n=i(88533)},49439:(t,e,i)=>{i.d(e,{A:()=>o});var n=i(24524),a=i(49688);const o=(0,i(66262).A)(a.A,[["render",n.X]])},49688:(t,e,i)=>{i.d(e,{A:()=>n.A});var n=i(2885)},50643:(t,e,i)=>{i.d(e,{A:()=>l});var n=i(31601),a=i.n(n),o=i(76314),r=i.n(o)()(a());r.push([t.id,".file-item{display:inline-block}.file-item.shows-modal-on-click:hover{cursor:pointer}.file-item.shows-modal-on-click:hover .image,.file-item.shows-modal-on-click:hover .file-placeholder{transform:scale(1.05)}.file-item:hover figcaption{background-color:var(--tainacan-gray1)}.file-item .image-wrapper{overflow:hidden;position:relative;display:inline-block}.file-item .image-wrapper .image{height:100%;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;transition:all .3s}.file-item .image-wrapper .file-placeholder{height:100%;width:100%;text-align:center;display:flex;justify-content:center;align-items:center;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;transition:all .3s}.file-item figcaption{background-color:var(--tainacan-white);padding:8px 15px;font-size:.75em;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:center}.tainacan-modal-title{text-align:left}.rendered-content{justify-content:center !important;flex-direction:column;align-items:center}.rendered-content p.attachment>a{display:block}",""]);const l=r},65475:(t,e,i)=>{i.d(e,{X:()=>n.X});var n=i(65692)},65692:(t,e,i)=>{i.d(e,{X:()=>r});var n=i(6934),a={key:1,style:{"background-color":"var(--tainacan-gray1)"},class:"file-placeholder"},o={class:"icon is-large"};function r(t,e,i,r,l,s){var m=(0,n.gN)("tooltip");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("figure",{class:(0,n.C4)(["file-item",{"shows-modal-on-click":i.modalOnClick}]),onClick:e[0]||(e[0]=function(t){return i.modalOnClick?s.openPreviewModal():null})},[i.showName&&null!=i.file.title?(0,n.bo)(((0,n.uX)(),(0,n.CE)("figcaption",{key:0,style:(0,n.Tr)({"max-width":null!=i.size?i.size+"px":"94px"})},[(0,n.eW)((0,n.v_)(i.file.title),1)],4)),[[m,{content:i.file.title,popperClass:["tainacan-tooltip","tooltip"]}]]):(0,n.Q3)("",!0),(0,n.Lk)("div",{style:(0,n.Tr)({width:null!=i.size?i.size+"px":"94px",height:null!=i.size?i.size+"px":"94px"}),class:"image-wrapper"},[i.file.thumbnails["tainacan-medium"]&&i.file.thumbnails["tainacan-medium"][0]||i.file.thumbnails.medium&&i.file.thumbnails.medium[0]?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"image",style:(0,n.Tr)({"background-image":"url("+(i.file.thumbnails["tainacan-medium"]?i.file.thumbnails["tainacan-medium"][0]:i.file.thumbnails.medium[0])+")"})},null,4)):((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("span",o,[(0,n.Lk)("i",{class:(0,n.C4)(["tainacan-icon-"+s.getIconForMimeType(i.file.mime_type),"has-text-gray tainacan-icon tainacan-icon-36px"])},null,2)])]))],4)],2)])}},72836:(t,e,i)=>{i.d(e,{A:()=>a});var n=i(49439);const a={name:"FileItem",props:{file:Object,size:94,showName:!1,isSelected:!1,modalOnClick:!0},methods:{getIconForMimeType:function(t){if(!t)return"attatchments";var e=t.split("/");if("application"==e[0]&&null!=e[1])return"pdf"===e[1]?"pdf":"attachments";switch(e[0]){case"video":return"video";case"audio":return"audio";case"text":return"text";default:return"attachments"}},openPreviewModal:function(){this.$buefy.modal.open({parent:this,component:n.A,props:{file:this.file},ariaModal:!0,width:1024,scroll:"keep",trapFocus:!0,ariaRole:"dialog",customClass:"tainacan-modal",closeButtonAriaLabel:this.$i18n.get("close")})}}}},74042:(t,e,i)=>{i.d(e,{$J:()=>u,X3:()=>f,lg:()=>c});var n=i(75552),a=i(55373),o=i.n(a),r=i(95093),l=i.n(r);function s(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return m(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var _n=0,n=function(){};return{s:n,n:function(){return _n>=t.length?{done:!0}:{done:!1,value:t[_n++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){r=!0,a=t},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw a}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var c={methods:{getSamplePermalink:function(t,e,i){return n.M3.post("",o().stringify({action:"tainacan-sample-permalink",post_id:t,new_title:e,new_slug:i}))}}},u={created:function(){var t=navigator.language;l().locale(t);var e=l().localeData();this.dateFormat=e.longDateFormat("L")?e.longDateFormat("L"):"pt_BR"==e._abbr?"DD/MM/YYYY":"YYYY-MM-DD",this.dateMask=this.dateFormat.replace(/[\w]/g,"0")},data:function(){return{dateFormat:"",dateMask:""}},methods:{parseDateToNavigatorLanguage:function(t){return t=new Date(t.replace(/-/g,"/")),l()(t,l().ISO_8601).format(this.dateFormat)}}},f={data:function(){return{formHooks:JSON.parse(JSON.stringify(tainacan_plugin.form_hooks)),formHookEventName:""}},computed:{hasBeginLeftForm:function(){return this.formHooks&&this.formHooks[this.entityName]&&this.formHooks[this.entityName]["begin-left"]&&this.formHooks[this.entityName]["begin-left"].length>0},hasBeginRightForm:function(){return this.formHooks&&this.formHooks[this.entityName]&&this.formHooks[this.entityName]["begin-right"]&&this.formHooks[this.entityName]["begin-right"].length>0},hasEndLeftForm:function(){return this.formHooks&&this.formHooks[this.entityName]&&this.formHooks[this.entityName]["end-left"]&&this.formHooks[this.entityName]["end-left"].length>0},hasEndRightForm:function(){return this.formHooks&&this.formHooks[this.entityName]&&this.formHooks[this.entityName]["end-right"]&&this.formHooks[this.entityName]["end-right"].length>0},getBeginLeftForm:function(){var t=this;return this.formHooks[this.entityName]["begin-left"].map((function(e){return t.checkFormConditionals(e)})).join("")},getBeginRightForm:function(){var t=this;return this.formHooks[this.entityName]["begin-right"].map((function(e){return t.checkFormConditionals(e)})).join("")},getEndLeftForm:function(){var t=this;return this.formHooks[this.entityName]["end-left"].map((function(e){return t.checkFormConditionals(e)})).join("")},getEndRightForm:function(){var t=this;return this.formHooks[this.entityName]["end-right"].map((function(e){return t.checkFormConditionals(e)})).join("")}},created:function(){this.formHookEventName="tainacan-"+this.entityName+"-hook-reload",this.formHookEvent=new Event(this.formHookEventName)},updated:function(){this.formHooks[this.entityName]&&document.dispatchEvent(this.formHookEvent)},methods:{fillExtraFormData:function(t){for(var e=0,i=["begin-left","begin-right","end-left","end-right"];e<i.length;e++){var n=i[e];if(this.formHooks[this.entityName]&&this.formHooks[this.entityName][n]&&null!=this.formHooks[this.entityName][n]){var a=document.getElementById("form-"+this.entityName+"-"+n);if(a){var o,r=s(a.elements);try{for(r.s();!(o=r.n()).done;){var l=o.value;"checkbox"==l.type||"select"==l.type&&null!=l.multiple&&1==l.multiple?l.checked&&null!=l.name&&""!=l.name&&(Array.isArray(t[l.name])||(t[l.name]=[]),t[l.name].push(l.value)):"radio"==l.type?l.checked&&null!=l.name&&""!=l.name&&(t[l.name]=l.value):t[l.name]=l.value}}catch(t){r.e(t)}finally{r.f()}}}}},updateExtraFormData:function(t){for(var e=0,i=["begin-left","begin-right","end-left","end-right"];e<i.length;e++){var n=i[e];if(this.formHooks[this.entityName]&&this.formHooks[this.entityName][n]&&null!=this.formHooks[this.entityName][n]){var a=document.getElementById("form-"+this.entityName+"-"+n);if(a){var o,r=s(a.elements);try{var l=function(){for(var e=o.value,i=0,n=Object.keys(t);i<n.length;i++){var a=n[i];if(e.name==a)if(Array.isArray(t[a])){var r=t[a].find((function(t){return t==e.value}));e.checked=null!=r}else null!=t[a]&&null!=t[a]&&""!=t[a]&&("radio"==e.type?e.checked=t[a]==e.value:e.value=t[a])}};for(r.s();!(o=r.n()).done;)l()}catch(t){r.e(t)}finally{r.f()}}}}},checkFormConditionals:function(t){return t.form?t.conditional&&t.conditional.attribute&&t.conditional.value?this.form&&this.form[t.conditional.attribute]===t.conditional.value?t.form:"":t.form:""}}}},84363:(t,e,i)=>{i.d(e,{A:()=>n.A});var n=i(72836)},88533:(t,e,i)=>{i.d(e,{X:()=>u});var n=i(6934),a={autofocus:"",role:"dialog",tabindex:"-1","aria-modal":"",class:"tainacan-modal-content"},o={class:"tainacan-modal-title"},r={key:0},l=["innerHTML"],s=["src"],m={class:"field is-grouped form-submit"},c={class:"control"};function u(t,e,i,u,f,h){return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("header",o,[null!=i.file.title?((0,n.uX)(),(0,n.CE)("h2",r,(0,n.v_)(t.$i18n.get("label_attachment")+": "+i.file.title),1)):(0,n.Q3)("",!0),e[1]||(e[1]=(0,n.Lk)("hr",null,null,-1))]),(0,n.Lk)("div",{class:"is-flex rendered-content",innerHTML:i.file.description?i.file.description:"<img alt='"+t.$i18n.get("label_thumbnail")+"' src='"+i.file.url+"'/>"},null,8,l),null!=i.file.url&&null!=i.file.url&&null!=i.file.mime_type&&"application/pdf"==i.file.mime_type?((0,n.uX)(),(0,n.CE)("iframe",{key:0,style:{width:"100%","min-height":"50vh"},src:i.file.url},null,8,s)):(0,n.Q3)("",!0),(0,n.Lk)("div",m,[(0,n.Lk)("div",c,[(0,n.Lk)("button",{id:"button-cancel-file-preview",class:"button is-outlined",type:"button",onClick:e[0]||(e[0]=function(e){return t.$emit("close")})},(0,n.v_)(t.$i18n.get("exit")),1)])])])}}}]);